.MODEL SMALL
.STACK
.DATA

MSG1 DB 10,13,"Enter First Number: $"
MSG2 DB 10,13,"Enter Second Number: $"
MSG3 DB 10,13,"Press 1 for Addition",10,13,"Press 2 for Subtraction",10,13,"Your Choice: $"
MSG4 DB 10,13,"Result: $"

NUM1 DW ?
NUM2 DW ?
RES DW ?

.CODE

DISP MACRO XX ;Macro for Disaplaying Messages 
MOV AH,09
LEA DX,XX
INT 21H
ENDM

INPUT MACRO INP,MSG

DISP MSG ;Input Message Display

MOV AH,01 ;for 1st digit
INT 21H
SUB AX,30H
MOV CL,12
SHL AX,CL
MOV BX,AX

MOV AH,01 ;for 2nd digit
INT 21H
SUB AX,30H
MOV CL,8
SHL AX,CL
ADD BX,AX

MOV AH,01 ;for 3rd digit
INT 21H
SUB AX,30H
MOV CL,4
SHL AX,CL
AND AX,00FFH
ADD BX,AX

MOV AH,01 ; for 4th digit
INT 21H
SUB AX,30H
AND AX,00FFH
ADD BX,AX
MOV INP,BX

ENDM


DISP_NUM MACRO NUM

MOV BX, NUM ;for digit 1
AND BX,0F000H
MOV CL,12
SHR BX,CL
ADD BX,30H
MOV DX,BX
MOV AH,02
INT 21H

MOV BX, NUM ;for digit 2
AND BX,0F00H
MOV CL,8
SHR BX,CL
ADD BX,30H
MOV DX,BX
MOV AH,02
INT 21H

MOV BX, NUM ;for digit 3
AND BX,00F0H
MOV CL,4
SHR BX,CL
ADD BX,30H
MOV DX,BX
MOV AH,02
INT 21H


MOV BX, NUM ;for digit 4
AND BX,000FH
ADD BX,30H
MOV DX,BX
MOV AH,02
INT 21H

ENDM

ADDITION PROC 
MOV AX,NUM1
ADD AX,NUM2
MOV RES,AX
DISP MSG4

JNC SKIP1
MOV AH,02
MOV DL,31H
INT 21H

SKIP1:
DISP_NUM RES

RET
ADDITION ENDP


SUBTRACTION PROC 

MOV AX,NUM1
SUB AX,NUM2
MOV RES,AX
DISP MSG4
DISP_NUM RES

RET
SUBTRACTION ENDP

.STARTUP

INPUT NUM1,MSG1 ;Taking input of First Number
INPUT NUM2,MSG2 ;Taking input of Second Number

DISP MSG3;Taking input of Type of Operation
MOV AH,01 
INT 21H

CMP AL,31H
JNZ SUBB

ADDD:
CALL ADDITION
JP LAST

SUBB:
CALL SUBTRACTION

LAST:
.EXIT
END